<?php
$escHtml = $this->plugin('escapeHtml');
$escAttr = $this->plugin('escapeHtmlAttr');
$escUrl  = $this->plugin('escapeUrl');

$footerSiteInfo  = $this->themeSetting('footer_site_info');
$footerMenuTitle = $this->themeSetting('footer_menu_title');
$footerLogos     = $this->themeSetting('footer_logos');
$socialNetworks  = array('facebook', 'twitter', 'linkedin', 'instagram', 'youtube', 'mastodon');

$hasSocialNetworks = false;
foreach ($socialNetworks as $social_network) {
    if ($this->themeSetting("{$social_network}_url")) {
        $hasSocialNetworks = true;
        break;
    }
}
?>

<div class="main-footer__top">
    <div class="main-footer__top-container container">

        <!-- Column 1 -->
        <div class="main-footer__col1">
            <div class="footer_site_info">
                <?php if ($footerSiteInfo) : ?>
                    <?php echo $footerSiteInfo; ?>
                <?php endif; ?>
            </div>
        </div>

        <!-- Column 2 -->
        <div class="main-footer__col2">
            <?php if ($footerMenuTitle): ?>
                <h6 class="main-footer__heading"><?php echo $footerMenuTitle; ?></h6>
            <?php endif; ?>

            <?php
                echo $site->publicNav()->menu()->renderMenu(null, [
                    'maxDepth' => 0
                ]);
            ?>
        </div>

        <!-- Column 3 -->
        <div class="main-footer__col3">
            <div class="main-footer__logos">
                <?php if ($footerLogos): ?>
                    <?php
                    $asset = $this->themeSettingAsset('footer_logos');
                    $alt = $asset->altText() ?? $site->title();
                    ?>
                    <img
                        src="<?php echo $this->themeSettingAssetUrl('footer_logos'); ?>"
                        alt="<?php echo $this->escapeHtml($alt); ?>" />
                <?php endif; ?>
            </div>

            <!-- Social Networks -->
            <?php if ($hasSocialNetworks) : ?>
                <div class="main-footer__social-network container">
                    <?php foreach ( $socialNetworks as $social_network ) : ?>
                        <?php if ( $social_network_url = $this->themeSetting( "{$social_network}_url" ) ) : ?>
                            <a href="<?php echo $social_network_url; ?>">
                                <img src="<?php echo $this->assetUrl( "img/{$social_network}.svg" ); ?>"
                                     alt="<?php echo $escAttr( $social_network ); ?>">
                            </a>
                        <?php endif; ?>
                    <?php endforeach; ?>
                </div>
            <?php endif; ?>
        </div>

    </div>

</div>
